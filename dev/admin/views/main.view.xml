<?xml version="1.0"?>
<Geety xmlns:Geety="Geety" xmlns:DB="DB@1">
    <Image>
        <p>
            <Geety:Content/>
            Nigga
        </p>
    </Image>

    <Card class="'Card'">
        <Geety:Arg name="test"/>

        <style>
            .Card{
                background: #ccc;
                padding: 15px;
                border-radius: 15px;
                display: inline-block;
            }
            .Card:has(#gold){
                background: gold !important;
            }
            .Card:has(#mrybs){
                border: 3px solid orange;
            }
            .Card:has(#_001kpp){
                border: 2px solid orange;
            }
            .Card:has(#test){
                border: 1px solid orange;
            }
        </style>
        <Geety:If cond="$test == 'mrybs'">
            <div id="'gold'"></div>
        </Geety:If>

        <Geety:Switch>
            <Geety:Case cond="$test == 'mrybs'">
                <div id="'mrybs'"></div>
            </Geety:Case>
            <Geety:Case cond="$test == '001kpp'">
                <div id="'_001kpp'"></div>
            </Geety:Case>
            <Geety:Case cond="$test == 'test'">
                <div id="'test'"></div>
            </Geety:Case>
        </Geety:Switch>

        $test@url
        <p><Image>
            <Geety:For each="elem:Content">
                <!--<Geety:Set elem="5"/>-->
                $elem
            </Geety:For>
            LOLKEK
        </Image></p>
        <ul>
            <Geety:For each="_:users">
                <Geety:For each="elem:Content">
                    <!--<Geety:Set elem="5"/>-->
                    <li>$elem</li>
                </Geety:For>
                <Geety:For each="elem:Content">
                    <!--<Geety:Set elem="5"/>-->
                    <li>$elem</li>
                </Geety:For>
            </Geety:For>
        </ul>
        <div><p>Hi, $test</p></div>
        <div>$test@html 9016436</div>
    </Card>

    <View>
        <Geety:Page title="Демка" favicon="/favicon.png"/>

        <Geety:Set a="1"/>
        <Geety:Set b="'$a'" c="'lolkek'"/>

        <DB:Query id="all_users" collection="users">
            <DB:Insert values="{'name': 'hecker', 'password_hash': '4eburek', 'role_id': 1}" returning="'id'"/>
            <DB:Find/>
            <DB:Pop filter="{'id': $all_users.0.id}"/>
        </DB:Query>
        <DB:Query id="log" collection="logs">
            <DB:Insert values="{'message': 'page load'}" returning="'id'"/>
            <DB:Count filter="{'message': 'page load'}"/>
        </DB:Query>
        <DB:Query collection="roles">
            <DB:Delete filter="{'code': 'banned'}"/>
        </DB:Query>
        <DB:Query collection="users">
            <DB:Update values="{'password_hash': 'lolkek4eburek'}" filter="{'id': 1}"/>
        </DB:Query>


        Это $log.1 загрузка страницы<br/>
        Всего $log.0.id записей в логах<br/>

        <Geety:For each="user:users">
            <Card test="'$user'">
                Welcome
            </Card>
        </Geety:For>

        <p>
            Hello, world!

            a=$a
            b=$b
            c=$c
        </p>

        <div>
            Users:
            <ul>
                <Geety:For each="user:all_users">
                    <li>
                        $user
                        <DB:Query id="role" collection="roles">
                            <DB:Find filter="{'id': $user.role_id}"/>
                        </DB:Query>
                        <ol>
                            <li>ID: $user.id</li>
                            <li>Name: $user.name</li>
                            <li>Role: $role.0.display_name</li>
                        </ol>
                    </li>
                </Geety:For>
            </ul>
        </div>
    </View>
</Geety>
